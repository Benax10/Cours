/*
        exercice 2
1) que se passe-t-il à l'exécution ?
2) corriger le code

int main(){
    char c;
    int r;
    int T[2];
    pipe(&T[0]);
    if(fork()==0){
        close(T[1]);
        r=read(T[0],&c,sizeof(char));
        while(r!=0){
            printf("char %c\n",c);
            r=read(T[0],&c,sizeof(char));
        }
        close(T[0]);
        exit(0);
    }
    close(T[0]);
    write(T[1],"bonjour",7*sizeof(char));
    sleep(10);
    wait(NULL);
    close(T[1]);
    exit(0);
}

*/

//réponse : 
#include <unistd.h>
#include <stdio.h>
#include <sys/wait.h>

int main(){
    char c;
    int r;
    int a=0;
    char buf[50];
    int t=7;
    int T[2];
    pipe(&T[0]);
    if(fork()==0){
        close(T[1]);
        read(T[0],&a,sizeof(int));
        r=read(T[0],buf,sizeof(char));
        close(T[0]);
        _exit(0);
    }
    close(T[0]);
    write(T[1],&t,sizeof(int));
    write(T[1],"bonjour",7*sizeof(char));
    sleep(10);
    wait(NULL);
    close(T[1]);
    _exit(0);
}