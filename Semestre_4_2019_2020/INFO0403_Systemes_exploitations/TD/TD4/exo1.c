/*
        exercice 1
le processus père doit enboyer l'heure système au processus fils qui l'affiche au format "compréhensible humainement (JJ/MM/AAAA HH:MM:SS)"
cf pipe, read, write, close, fork, time, localtime, strftime

*/
#include <time.h>
#include <unistd.h>
#include <stdio.h>
#include <sys/wait.h>
int main(){
    int T[2];
    time_t Date,DateR;
    char DH[80];

    pipe(&T[0]);
    if(fork()==0){
        close(T[1]);
        read(T[0],&DateR,sizeof(time_t));
        strftime(DH,80,"%T %D",localtime (&DateR));
        printf("%s\n",DH);
        close(T[0]);
        exit(0);   
    }
    close(T[0]);
    time(&Date);
    write(T[1],&Date,sizeof(time_t));
    wait(NULL);
    close(T[1]);
    exit(0);
}